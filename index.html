<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>eunoia</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html-docx-js/0.4.0/html-docx.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<header class="topbar">
  <div class="top-left">
    <span class="brand" data-route="home">eunoia</span>
    <nav class="tabs">
      <button class="tabbtn" data-route="home">home</button>
      <button class="tabbtn" data-route="projects">logastellus</button>
      <button class="tabbtn" data-route="editor">write</button>
      <button class="tabbtn" data-route="reverie">reverie</button>
      <button class="tabbtn" data-route="posts">stellaviva</button>
      <button class="tabbtn" data-route="melomanie">melomanie</button>
    </nav>
  </div>
  <div class="top-right">
    <span id="saveIndicator" class="save-ind">saved</span>
    <button id="downloadDocxBtn" class="mini">Download .docx</button>
    <button id="downloadPdfBtn" class="mini">Download .pdf</button>
  </div>
</header>

<main id="app">

<!-- HOME -->
<section id="view-home" class="view">
  <div class="dash-center">
    <h1 class="dash-title">eunoia</h1>
    <button class="dash-cta" data-route="projects">start writing</button>
  </div>
</section>

<!-- PROJECTS -->
<section id="view-projects" class="view hidden">
  <h2>logastellus — projects</h2>
  <input id="newProjectTitle" placeholder="New project title" />
  <button id="createProjectBtn">+ New Project</button>
  <div id="projectsGrid" class="projects-grid"></div>
</section>

<!-- EDITOR -->
<section id="view-editor" class="view hidden">
  <div class="editor-wrap">

    <aside class="editor-left-pane">
      <button id="backToProjects" class="ghost">← back</button>
      <input id="projectTitleInput" placeholder="Untitled project" />
      <small id="projectUpdated">Last saved: —</small>

      <div class="toc-box">
        <h4>Outline</h4>
        <div id="tocList"></div>
      </div>
    </aside>

    <section class="editor-mainpane">
      <div class="toolbar">
        <button class="tool" data-cmd="bold">B</button>
        <button class="tool" data-cmd="italic">I</button>
        <button class="tool" data-cmd="underline">U</button>
        <select id="heading">
          <option value="">Normal</option>
          <option value="h1">H1</option>
          <option value="h2">H2</option>
          <option value="h3">H3</option>
        </select>
      </div>

      <div id="docCanvasWrap">
        <div id="docCanvas" class="doc-canvas" contenteditable="true">
          <h1>Start writing</h1>
          <p></p>
        </div>
      </div>
    </section>

    <aside class="editor-right-pane">
      <h4>Notes</h4>
      <div id="notesList"></div>
      <button id="addNoteBtn">Add Note</button>
    </aside>

  </div>
</section>

<!-- REVERIE -->
<section id="view-reverie" class="view hidden">
  <h2>reverie</h2>
  <button id="revCharBtn">Characters</button>
  <button id="revPlotBtn">Plots</button>

  <div id="reverie-characters" class="hidden">
    <input id="newCharacterName" placeholder="New character name" />
    <button id="createCharacterBtn">+ Create</button>
    <div id="charactersGrid"></div>

    <div id="characterEditor" class="card hidden">
      <input id="charName" placeholder="Character Name" />
      <textarea id="charPhysical" placeholder="Physical Description"></textarea>
      <textarea id="charGeneral" placeholder="General Description"></textarea>
      <textarea id="charInternal" placeholder="Internal Conflict"></textarea>
      <textarea id="charMisbelief" placeholder="Misbelief"></textarea>
      <textarea id="charDesire" placeholder="Desire"></textarea>
      <textarea id="charFear" placeholder="Fear"></textarea>
      <textarea id="charQuirks" placeholder="Quirks"></textarea>
      <textarea id="charHobbies" placeholder="Hobbies"></textarea>
      <input id="charRole" placeholder="Role in story" />
      <input id="charQuote" placeholder="Quote they live by" />

      <!-- MOVED TO BOTTOM -->
      <input id="charSong" placeholder="Song that describes them" />

      <button id="saveCharacterBtn">Save</button>
      <button id="cancelCharacterBtn">Cancel</button>
    </div>
  </div>

  <div id="reverie-plots" class="hidden">
    <input id="newPlotTitle" placeholder="New plot title" />
    <button id="createPlotBtn">+ Create Plot</button>
    <div id="plotsGrid"></div>
  </div>
</section>

<!-- POSTS -->
<section id="view-posts" class="view hidden">
  <h2>stellaviva</h2>
</section>

<!-- MELOMANIE -->
<section id="view-melomanie" class="view hidden">
  <h2>melomanie</h2>
  <input id="spotifyUrl" placeholder="Spotify playlist link" />
  <button id="loadSpotify">Load</button>
  <iframe id="spotifyPlayer"></iframe>
</section>

</main>

<div id="toast" class="toast"></div>

<script src="app.js"></script>
</body>
</html>
